<!DOCTYPE html>
<html lang="en">
   <head>
		<meta charset="utf-8">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      
  <!-- Link Swiper's CSS -->
  <link rel="stylesheet" href="css/swiper.min.css">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/glider-js/1.7.3/glider.min.css">
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
  <!--FOR FIREBASE ACCESS-->  
      
      <style>
         .tdalign { text-align: left; padding-left: 10px; }         
         #info_table td  { vertical-align: middle; padding-top: 10px; }
         .btn-display-left{position:absolute;top:50%;left:5%;transform:translate(0%,-50%);-ms-transform:translate(-0%,-50%)}
         .btn-display-right{position:absolute;top:50%;right:0%;transform:translate(0%,-50%);-ms-transform:translate(0%,-50%)}
         .swipe-button:hover{color:#000!important;background-color:#ccc!important}
      </style>
		<!--FOR SWIPE EVENTS-->      
      <!--<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>-->
      <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
      <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
      <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">-->
      <!-- <link href="css/font-awesome.min.css" rel="stylesheet">       -->
		<link href="css/style.css" rel="stylesheet">
      <link href="css/responsive.css" rel="stylesheet">
      
      <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
      <!--FOR FIREBASE ACCESS-->      
      <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-app.js"></script>      
      <script src="https://www.gstatic.com/firebasejs/7.22.1/firebase-analytics.js"></script>  
      <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-firestore.js"></script>
      <script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-database.js"></script>
      <script src="https://www.gstatic.com/firebasejs/7.21.0/firebase-storage.js"></script>    
      <script async src="https://www.googletagmanager.com/gtag/js"></script>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/glider-js/1.7.3/glider.min.js"></script>
      
      <script>  
         $(document).ready(function(){
            //$("#product_content").hide();
            
            if(screen_type != "app"){                          
               headerFooterSetup();
            }else{
               $("#header_productpage").hide();
               $("#footer_productpage").hide();
               $("#copyright_productpage").hide();
            }
            $(document).on('click', '.wish_div', function(){
               alert("wish");
               logEvent("wishlist", { "test": "wish" });
            });
            $(document).on('click', '.share_div', function(){
               alert("share");
               logEvent("share", { "test": "share" });
            });
         }); 

         function headerFooterSetup(){
               
               //HEADDER SETUP
               var headerContent = "<div id=\"header_productpage\">"+
               "<img src=\"images/product_page_logo.webp\" id=\"logo\">"+
               "<a href=\"https://play.google.com/store/apps/details?id=com.finahub.finaura&referrer=utm_source%3Dsite\" target=\"_blank\"><img src=\"images/google-play.webp\" id=\"playstore\"></a></div>"+
               "</div>";
               (document.getElementById("header_div")).innerHTML = headerContent;
               //FOOTER SETUP
               var footerContent = "<div id=\"footer_productpage\" class=\"footer\"> "+
                                 "<div class=\"container\">"+
                                 "<div class=\"row\">"+
                                 "<div class=\"col-xs-12 col-md-6 col-xl-6 col-lg-6  col-sm-12\">"+
                                 "<div class=\"call_now2\">"+
                                 "<h3>Finahub Technology Solutions Pvt. Ltd.</h3>"+
                                 "<span>ISC, KSUM, Kinfra Hi-Tech Park,<br> Kalamassery, Kochi, Kerala</p> <br>"+
                                 "<p>Phone: +91 484 2388285 <br> Email: finaura@finahub.com <br> Web: <a href=\"https://www.finahub.com\" target=\"_blank\">www.finahub.com</a></span>"+
                                 "</div>"+
                                 "</div>"+
                                 "<div class=\"col-md-3 col-xl-3 col-lg-3  col-sm-12 col-xs-12\">"+
                                 "<h4> <a href=\"disclaimer.html\" target=\"_blank\">Disclaimer</a></h4>"+
                                 "<h4> <a href=\"privacy_policy.html\" target=\"_blank\">Privacy Policy</a></h4>"+
                                 "</div>"+
                                 "<div class=\"col-md-3 col-xl-3 col-lg-3  col-sm-12 col-xs-12 call_now marg_call pad-out\">"+
                                 "<h3>Follow US</h3>"+
                                 "<span>"+
                                 "<ul class=\"social-menu \">"+  
                                 "<li class=\"ml-5\">"+ 
                                 "<a href=\"https://www.facebook.com/Finaura-1049044451963225/\" target=\"_blank\" class=\"fa fa-facebook\"></a>"+  
                                 "</li>"+  
                                 "<li class=\" ml-5\">"+ 
                                 "<a href=\"https://twitter.com/finaura_app\" target=\"_blank\" class=\"fa fa-twitter\"></a>"+  
                                 "</li>"+
                                 "<li class=\" ml-5\">"+  
                                 "<a href=\"https://blog.finaura.net/feed/\" target=\"_blank\" class=\"fa fa-rss\"></a> "+ 
                                 "</li>"+
                                 "<li class=\" ml-5\">"+  
                                 "<a href=\"https://www.instagram.com/finaura_app/\" target=\"_blank\" class=\"fa fa-instagram\"></a>"+  
                                 "</li>  </ul> </span> </div>  </div></div></div>";                                 
                                 (document.getElementById("footer_div")).innerHTML = footerContent;
                  var copyright_content = "<div id=\"copyright_productpage\" class=\"container\"><p>© "+(new Date()).getFullYear()+" Finahub Technology Solutions Pvt. Ltd. All Rights Reserved</p></div>";
                                 (document.getElementById("copyright_div")).innerHTML = copyright_content;
         }
      
         var images ;
         var buy_link;   
         var screen_type; 
         var jeweller ="";   
         var category ="";     

         //GET URL PARAMETER
         const queryString = window.location.search;
         var params = queryString.split('?')[1]; 
         var param1 = params.split('&')[0];
         var param2 = params.split('&')[1];
         var doc_id = param1.split('=')[1];
         var collection_name = param2.split('=')[1];
         if(params.split('&').length > 2){
            var param3 = params.split('&')[2];
            screen_type = param3.split('=')[1];
         }else{
            screen_type = "shared";
         }
         
         var table_row_data = "";
         var firebaseConfig = {
            apiKey: "AIzaSyDT9Y6tORfxQNiCw0tjKW8cPkWr9Rumhec",
            authDomain: "finaura-app.firebaseapp.com",
            databaseURL: "https://finaura-app.firebaseio.com",
            projectId: "finaura-app",
            storageBucket: "finaura-app.appspot.com",
            messagingSenderId: "938638494772",
            appId: "1:938638494772:web:2c2d4edafecc3a7150ce61",
            measurementId: "G-6P2Z52CFC7"
         };
         // Initialize Firebase
         var app = firebase.initializeApp(firebaseConfig);
         var analytics = firebase.analytics();         
           
         firebase
         .firestore()
         .collection(collection_name)
         .doc(doc_id)
         .get()
         .then((docRef) => { console.log(docRef.data());
            var price = docRef.data().price;
            var description = docRef.data().description;
            category = docRef.data().category;
            var arrayCategory = docRef.data().sub_category;
            var subcategory = arrayCategory[0];
            var weight = docRef.data().weight;
            jeweller = docRef.data().jeweller;
            buy_link = docRef.data().url;
            images = docRef.data().image_urls;
            if(category != ""){
               category = category.toLowerCase();
            }
            if(jeweller != "undefined"){
               jeweller = jeweller.toLowerCase();
            }

            if(description != ""){
               document.getElementById("title").innerHTML=description;
            }
            if(price != 'undefined'){
               if(price > 0){
                  //var n = new Number(1000000);
                  var myObj = {
                  style: "currency",
                  currency: "INR"
                  }
                  if(screen_type == "app"){
                     document.getElementById("price").innerHTML=price.toLocaleString("en-IN", myObj);
                  }else{
                     //document.getElementById("price").innerHTML="Price : "+price.toLocaleString("en-IN", myObj);
                     table_row_data += "<tr><td class=\"info_data\" id=\"categoryLabel\" style=\"color: #000;\">Price</td><td class=\"tdalign\">:</td><td class=\"tdalign\"><span class=\"info_data\" id=\"sub_category\" style='text-transform: capitalize'>"+price.toLocaleString("en-IN", myObj)+"</span></td></tr>";
                  }
               }
            }
            if(category != ""){
               table_row_data += "<tr><td class=\"info_data\" id=\"categoryLabel\" style=\"color: #000;\">Product Category</td><td class=\"tdalign\">:</td><td class=\"tdalign\"><span class=\"info_data\" id=\"sub_category\" style='text-transform: capitalize'>"+category+"</span></td></tr>";
            }
            if(arrayCategory.length > 0){
               subcategory = subcategory.toLowerCase();
               table_row_data += "<tr><td class=\"info_data\" id=\"categoryLabel\" style=\"color: #000;\">Sub-Category</td><td class=\"tdalign\">:</td><td class=\"tdalign\"><span class=\"info_data\" id=\"sub_category\" style='text-transform: capitalize'>"+subcategory+"</span></td></tr>";
            }
            if(weight != null){
               if(weight > 0){
                  table_row_data += "<tr><td class=\"info_data\" id=\"categoryLabel\" style=\"color: #000;\">Weight</td><td class=\"tdalign\">:</td><td class=\"tdalign\"><span class=\"info_data\" id=\"sub_category\">"+(weight/1000)+" gms </span></td></tr>";
               }
            }
            if((jeweller != "")){
               if(screen_type == "app"){
                  document.getElementById("btnsubmit").innerHTML="<div id=\"button_div_content\"><center><img class=\"buy_icon\" src=\"images/cart.png\"><span>Get it from</span><span> "+jeweller+"</span></center></div>";
                  //document.getElementById("btnsubmit").innerHTML= "<button class=\"buy_btn button_fixed\" onclick=\"logBuyAnalytics('Product_page buy link clicked')\">Get it from<span id=\"buy_jeweller\" style='text-transform: capitalize'> "+jeweller+"</span></button>";
               }else{
                  document.getElementById("btnsubmit").innerHTML="<div id=\"button_div_content\"><center><img class=\"buy_icon\" src=\"images/cart1.png\"><span class=\"buy_text\">Get it from "+jeweller+"</span></center></div>";
                  //document.getElementById("btnsubmit").innerHTML= "<button class=\"buy_btn button_fixed_web\" onclick=\"logBuyAnalytics('Product_page buy link clicked')\">Get it from<span id=\"buy_jeweller\" style='text-transform: capitalize'> "+jeweller+"</span></button>";
               }
            }
            //add row to table
            document.getElementById("info_table").innerHTML=table_row_data;

            
            //ADD JEWELLERY IMAGES            
           // var div = document.createElement('div');
             var gdiv = document.getElementById('glider')   
            //div.classList.add("swiper-wrapper");
            for (i = 0; i < images.length; i++) {
               var elem = document.createElement("img");
               var currentImg = images[i]; 
               if(currentImg.includes("bluestone.com")){
                  var url_parts = currentImg.split(",");
                  currentImg = url_parts[0]+","+url_parts[1]+",w_414,"+url_parts[3];
               }
               elem.setAttribute("src", currentImg); 
               elem.setAttribute("width" , 414);
               elem.setAttribute("height",414);
               //elem.setAttribute("style","height:414; width:414;");
               //elem.classList.add("swiper-slide");
               //elem.classList.add("img-responsive");
               //div.appendChild(elem);     
               gdiv.appendChild(elem);
                    
            }

            
            
            // var slide = document.getElementById("swipediv");
            // slide.appendChild(div);
            
            //ADD JEWELLER LOGO
            if(jeweller != ""){
               var logo_session = document.getElementById("imglogo");
               if(screen_type == "app"){
                  logo_session.classList.add("imglogo_app");
               }else{
                  logo_session.classList.add("imglogo_web");
               }
               var logoImgDiv = document.createElement("div");
               var logo_elem = document.createElement("img");
               logo_elem.setAttribute("src", 'images/jeweller/'+jeweller+'.webp');
               logo_elem.classList.add("logo_jeweller");
               logoImgDiv.appendChild(logo_elem);

               var wish_div = document.createElement("div");
               wish_div.classList.add("wish_div");
               var wish_elem = document.createElement("img");
               wish_elem.setAttribute("src", "images/heart2.png");
               wish_elem.setAttribute("width", "100%");
               wish_elem.classList.add("fab_img");
               wish_div.classList.add("fab_icons");
               wish_div.appendChild(wish_elem);
               var wish_p = document.createElement("span");
               wish_p.classList.add("fab_label");
               wish_p.append('Wish List');
               wish_div.appendChild(wish_p);
               logoImgDiv.appendChild(wish_div);

               var share_div = document.createElement("div");
               share_div.classList.add("share_div");
               var share_elem = document.createElement("img");
               share_elem.setAttribute("src", "images/share2.png");
               share_elem.classList.add("fab_img");
               share_elem.setAttribute("width", "99%");
               share_div.classList.add("fab_icons");
               share_div.appendChild(share_elem);
               var share_p = document.createElement("span");
               share_p.classList.add("fab_label");
               share_p.append('Share');
               share_div.appendChild(share_p);
               logoImgDiv.appendChild(share_div);
               logo_session.appendChild(logoImgDiv);
               //var storageRef = firebase.storage();                                         
            }   

            if(images.length < 2){
               // $(".swiper-button-next").hide();
               // $(".swiper-button-prev").hide();  
               $(".glider-prev").hide();
               $(".glider-next").hide();           
            }
            if(images.length > 1){
               //START SWIPER      
               // var swiper = new Swiper('.swiper-container', {
               //    navigation: {
               //    nextEl: '.swiper-button-next',
               //    prevEl: '.swiper-button-prev',
               //    },
               // });
            }
            $.mobile.loading().hide(); 
            $("#loader").hide();
            $("#product_content").show();

            initiateGlider();
          
         })
         .catch((error) => { 
            console.log("err "+error) 
         });

         function redirect(){
            window.location.href = buy_link;
         }

         function logLoadAnalytics(){  
            var logtitle = "Product_page_visited_by_"+screen_type;             
            var logData="url_type:" +screen_type+", category:"+ category+", jeweller:"+ jeweller;
               console.log(logtitle+" > "+logData);
               analytics.logEvent(logtitle, logData);
         }

         function logBuyAnalytics(){
            var logtitle = "Product_page_buy_clicked_by_"+screen_type;
            var logData="url_type:" +screen_type+", category:"+ category+", jeweller:"+ jeweller;
               console.log(logtitle+" > "+logData);
               analytics.logEvent(logtitle, logData);
               redirect();
         }

         function initiateGlider() {
            new Glider(document.querySelector('.glider'), {
               slidesToShow: 1,
               slidesToScroll: 1,
               scrollLock: true,
               dots: '.dots',
               arrows: {
                  prev: '.glider-prev',
                  next: '.glider-next'
               }
            });
         }
     
         
      </script>
      <style>
         #loader {
           border: 16px solid #f3f3f3;
           border-radius: 50%;
           border-top: 16px solid#F8CF2C;
           width: 120px;
           height: 120px;
           -webkit-animation: spin 2s linear infinite; /* Safari */
           animation: spin 2s linear infinite;
         }
         
         /* Safari */
         @-webkit-keyframes spin {
           0% { -webkit-transform: rotate(0deg); }
           100% { -webkit-transform: rotate(360deg); }
         }
         
         @keyframes spin {
           0% { transform: rotate(0deg); }
           100% { transform: rotate(360deg); }
         }

         .glider {
            scrollbar-width: none;
         }

         </style>
         
         <!-- Global site tag (gtag.js) - Google Analytics - old_id >  -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143261153-1"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-143261153-1');
      </script>

   </head>
   <!-- body -->
   <body onload="logLoadAnalytics()"> 
      <div id="header_div">
         <!--<img id="logo" src="images/logo.webp" alt="Finaura logo">
         <img id="playstore" src="images/google-play.webp">-->
      </div>
   
      <div class="container" >
         <center><div id="loader" style="margin-top: 100px;"></div></center>
         <div id="product_content">
         <div class="row">              
            <div class="col-xs-12 col-sm-12 col-md-12 col-xs-12"> 
               <div id="imglogo"></div>
               <!--<img id="imglogo" class="jeweller_img" src="" />-->
            </div>
         </div>
         <div class="row">  
            <div class="col-xs-12 col-sm-12 col-md-6 col-xs-12" >               
               <!-- <div class="w3-content w3-display-container"> -->
                  <div class="glider-contain">
                     <div id = 'glider' class="glider">
                        
                       <!-- <div>your content here</div>
                       <div>your content here</div>
                       <div>your content here</div>
                       <div>your content here</div> -->
                     </div>
                   
                     <button aria-label="Previous" class="glider-prev glider_position"><i class='fas fa-angle-left' style='font-size:48px;color:#f8c340'></i></button>
                     <button aria-label="Next" class="glider-next"><i class='fas fa-angle-right' style='font-size:48px;color:#f8c340'></i></div></button>
                     <div role="tablist" class="dots"></div>
                   <!-- </div>   -->
               </div>       
               
               
               
         
            <div class="col-xs-12 col-sm-12 col-md-6 col-xs-12 appabout pad-out " >               
               <div class="row">
                  <div class="details_div"> 
                     <div class="col-xs-12 col-sm-8 col-md-12 col-xs-12 abt_left">
                     <div class="info_title" style="float: left; margin-left: 25px;"><b><span id="title"></span></b></div><br/>
                     </div>                    
                     <div class="col-xs-12 col-sm-4 col-md-12 col-xs-12 abt_left">
                        <div class="price_info"><b><span id="price"> </span></b></div><br/>
                     </div>                                          
                  </div>
                               
                  <div class="details_div">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-xs-12"> 
                        <table id="info_table" style="margin-bottom: 125px;">                           
                           
                        </table>                        
                        <br/>
                     </div>
                     <br/> 
                  </div>

               </div> 
               <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-12 col-xs-12">
                  <div id="button_div">
                  <b id="btnsubmit"></b>
                  </div>
                  </div>
               </div>
            </div>
         </div> 
          
         </div>       
      </div>
      

      </div>

      <div id="footer_div">
         
      </div>
      <div id="copyright_div">
         
      </div>

  
   <!-- Javascript files-->
   
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"></script>
   <script src='https://kit.fontawesome.com/a076d05399.js'></script>
   <!-- <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script> -->
   <script type="text/javascript" src="js/firebase_interfacing.js"></script>
    
   </script>

  
</body>
</html>